<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/highcharts.js"></script>
	

	<script type="text/javascript" src="js/performance.js"></script>
	<script type="text/javascript" src="js/cpu.js"></script>
	<script type="text/javascript" src="js/mem.js"></script>
	<script type="text/javascript" src="js/network.js"></script>
</head>
<body>
<p>物理机统计图表</p>
<div id="cpuChart" style="width:100%;height:200px"></div>
<div id="memChart" style="width:100%;height:200px"></div>
<div id="networkChart" style="width:100%;height:200px"></div>
<div id="json"></div>
</body>
</html>
<script type="text/javascript">
    var chartMap = new Map();
	function counXInterval(lineNum,xInterval){
		xInterval = xInterval * 2;
		lineNum = lineNum/2;
		if(Math.ceil(lineNum)>5){
			return counXInterval(lineNum,xInterval);
		}else{
			return lineNum+","+xInterval;
		}
	}

	function updateData(Data){
		 drawLineCpu($.PERFORMANCE.formHostJson(Data), "all");
		 drawLineMemory($.PERFORMANCE.formHostJson(Data));
		 drawLineNetWork($.PERFORMANCE.formHostJson(Data),"host");
	}
	$.ajax({
		url:"js/data.json",
		success:function(data){
			updateData(data)
			}
		})

	function connectWebViewJavascriptBridge(callback) {
	    if (window.WebViewJavascriptBridge) {
	        callback(WebViewJavascriptBridge)
	    } else {
	        document.addEventListener('WebViewJavascriptBridgeReady', function() {
	            callback(WebViewJavascriptBridge)
	        }, false)
	    }
	}

	connectWebViewJavascriptBridge(function(bridge) {

	    /* Init your app here */
	    bridge.init(function(message, responseCallback) {
	        //alert('Received message: ' + message)

       	        if (responseCallback) {
	            responseCallback("Right back atcha")
	        }
	    })

	    bridge.registerHandler('testJavascriptHandler', function(data, responseCallback) {
	    	、、updateData(data);
			var responseData = { 'Javascript Says':'Right back atcha!' }
			responseCallback(responseData)
		})
	    bridge.send('Hello from the javascript')
	    bridge.send('Please respond to this', function responseCallback(responseData) {
	        console.log("Javascript got its response", responseData)
	    })
	})

</script>